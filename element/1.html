<tbody><tr><td class="gutter"><p class="line number1 index0 alt2">1</p><p class="line number2 index1 alt1">2</p><p class="line number3 index2 alt2">3</p><p class="line number4 index3 alt1">4</p><p class="line number5 index4 alt2">5</p><p class="line number6 index5 alt1">6</p><p class="line number7 index6 alt2">7</p><p class="line number8 index7 alt1">8</p><p class="line number9 index8 alt2">9</p><p class="line number10 index9 alt1">10</p><p class="line number11 index10 alt2">11</p><p class="line number12 index11 alt1">12</p><p class="line number13 index12 alt2">13</p><p class="line number14 index13 alt1">14</p><p class="line number15 index14 alt2">15</p><p class="line number16 index15 alt1">16</p><p class="line number17 index16 alt2">17</p><p class="line number18 index17 alt1">18</p><p class="line number19 index18 alt2">19</p><p class="line number20 index19 alt1">20</p><p class="line number21 index20 alt2">21</p><p class="line number22 index21 alt1">22</p><p class="line number23 index22 alt2">23</p><p class="line number24 index23 alt1">24</p><p class="line number25 index24 alt2">25</p><p class="line number26 index25 alt1">26</p><p class="line number27 index26 alt2">27</p><p class="line number28 index27 alt1">28</p><p class="line number29 index28 alt2">29</p><p class="line number30 index29 alt1">30</p><p class="line number31 index30 alt2">31</p><p class="line number32 index31 alt1">32</p><p class="line number33 index32 alt2">33</p><p class="line number34 index33 alt1">34</p><p class="line number35 index34 alt2">35</p><p class="line number36 index35 alt1">36</p><p class="line number37 index36 alt2">37</p><p class="line number38 index37 alt1">38</p><p class="line number39 index38 alt2">39</p><p class="line number40 index39 alt1">40</p><p class="line number41 index40 alt2">41</p><p class="line number42 index41 alt1">42</p><p class="line number43 index42 alt2">43</p><p class="line number44 index43 alt1">44</p><p class="line number45 index44 alt2">45</p><p class="line number46 index45 alt1">46</p><p class="line number47 index46 alt2">47</p></td><td class="code" style="
    user-select: all;
"><div class="container"><p class="line number1 index0 alt2"><code class="php comments">// Loading the dependencies. We don't need pretty</code></p><p class="line number2 index1 alt1"><code class="php comments">// because we shall not log html to the terminal</code></p><p class="line number3 index2 alt2"><code class="php keyword">const</code> <code class="php plain">axios = </code><code class="php keyword">require</code><code class="php plain">(</code><code class="php string">"axios"</code><code class="php plain">);</code></p><p class="line number4 index3 alt1"><code class="php keyword">const</code> <code class="php plain">cheerio = </code><code class="php keyword">require</code><code class="php plain">(</code><code class="php string">"cheerio"</code><code class="php plain">);</code></p><p class="line number5 index4 alt2"><code class="php keyword">const</code> <code class="php plain">fs = </code><code class="php keyword">require</code><code class="php plain">(</code><code class="php string">"fs"</code><code class="php plain">);</code></p><p class="line number6 index5 alt1">&nbsp;</p><p class="line number7 index6 alt2"><code class="php comments">// URL of the page we want to scrape</code></p><p class="line number8 index7 alt1"><code class="php keyword">const</code> <code class="php plain">url = </code><code class="php string">"https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3"</code><code class="php plain">;</code></p><p class="line number9 index8 alt2">&nbsp;</p><p class="line number10 index9 alt1"><code class="php comments">// Async function which scrapes the data</code></p><p class="line number11 index10 alt2"><code class="php plain">async </code><code class="php keyword">function</code> <code class="php plain">scrapeData() {</code></p><p class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php keyword">try</code> <code class="php plain">{</code></p><p class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Fetch HTML of the page we want to scrape</code></p><p class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">const</code> <code class="php plain">{ data } = await axios.get(url);</code></p><p class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Load HTML we fetched in the previous line</code></p><p class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">const</code> <code class="php plain">$ = cheerio.load(data);</code></p><p class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Select all the list items in plainlist class</code></p><p class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">const</code> <code class="php plain">listItems = $(</code><code class="php string">".plainlist ul li"</code><code class="php plain">);</code></p><p class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Stores data for all countries</code></p><p class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">const</code> <code class="php plain">countries = [];</code></p><p class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Use .each method to loop through the li we selected</code></p><p class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">listItems.each((idx, el) =&gt; {</code></p><p class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Object holding data for each country/jurisdiction</code></p><p class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">const</code> <code class="php plain">country = { name: </code><code class="php string">""</code><code class="php plain">, iso3: </code><code class="php string">""</code> <code class="php plain">};</code></p><p class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Select the text content of a and span elements</code></p><p class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Store the textcontent in the above object</code></p><p class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">country.name = $(el).children(</code><code class="php string">"a"</code><code class="php plain">).text();</code></p><p class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">country.iso3 = $(el).children(</code><code class="php string">"span"</code><code class="php plain">).text();</code></p><p class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Populate countries array with country data</code></p><p class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">countries.push(country);</code></p><p class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">});</code></p><p class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Logs countries array to the console</code></p><p class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">console.dir(countries);</code></p><p class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">// Write countries array in countries.json file</code></p><p class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">fs.writeFile(</code><code class="php string">"coutries.json"</code><code class="php plain">, JSON.stringify(countries, null, 2), (err) =&gt; {</code></p><p class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(err) {</code></p><p class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">console.error(err);</code></p><p class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code><code class="php plain">;</code></p><p class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></p><p class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">console.log(</code><code class="php string">"Successfully written data to file"</code><code class="php plain">);</code></p><p class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">});</code></p><p class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">catch</code> <code class="php plain">(err) {</code></p><p class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">console.error(err);</code></p><p class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;</code><code class="php plain">}</code></p><p class="line number45 index44 alt2"><code class="php plain">}</code></p><p class="line number46 index45 alt1"><code class="php comments">// Invoke the above function</code></p><p class="line number47 index46 alt2"><code class="php plain">scrapeData();</code></p></div></td></tr></tbody>